#!/bin/bash

# EmailThreads Plugin Auto-Installation Script
# This script runs the automated installation and cleans up

echo "üöÄ EmailThreads Plugin Auto-Installation"
echo "======================================="
echo ""

# Check if we're in the plugin directory
if [ ! -f "auto_install.php" ]; then
    echo "‚ùå Error: This script must be run from the EmailThreads plugin directory"
    echo "Please cd into the plugin directory and run: ./install"
    exit 1
fi

# Make sure we have PHP
if ! command -v php &> /dev/null; then
    echo "‚ùå Error: PHP is not installed or not in PATH"
    exit 1
fi

# Run the automated installation
echo "Running automated installation..."
php auto_install.php

# Check if installation was successful
if [ $? -eq 0 ]; then
    echo ""
    echo "‚úÖ Installation completed successfully!"
    echo ""
    echo "The plugin is now ready to use. You can:"
    echo "1. Restart your web server or Docker container"
    echo "2. Go to your Mautic admin panel"
    echo "3. Look for 'Email Threads' in the main menu"
    echo "4. Configure the plugin in Settings ‚Üí Plugins ‚Üí Email Threads"
else
    echo ""
    echo "‚ùå Installation failed. Please check the error messages above."
    exit 1
fi
